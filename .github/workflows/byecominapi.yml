name: Publish byecomin api to ec2	
on:
  push:
    branches:
      - master
jobs:
  FTP-Deploy-Action:
    name: FTP-Deploy-Action
    runs-on: ubuntu-latest
    steps:
    - uses:  actions/checkout@v1

    - name: ls -a via sshddd
      uses: appleboy/ssh-action@master
      with:  
           host: ${{ secrets.HOST }}
           username: ${{ secrets.USER }}
           password: ${{ secrets.PASWD }}
           script: |
               cd /home/ubuntu/api
               git fetch https://byecomin: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@github.com/byecomin/api.git
               git pull https://byecomin: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@github.com/byecomin/api.git
               npm i
               npm run build
